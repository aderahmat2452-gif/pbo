   class User {
    constructor(username, password) {
        this.username = username;
        this.password = password;
    }
}

class AuthService {
    constructor() {
        this.defaultUser = new User("admin", "12345");
        this.saveUser();
    }

    saveUser() {
        if (!localStorage.getItem("userData")) {
            localStorage.setItem(
                "userData",
                JSON.stringify(this.defaultUser)
            );
        }
    }

    login(username, password) {
        const user = JSON.parse(localStorage.getItem("userData"));

        return (
            username === user.username &&
            password === user.password
        );
    }
}

class LoginController {
    constructor() {
        this.authService = new AuthService();
        this.form = document.getElementById("loginForm");
        this.message = document.getElementById("message");
        this.init();
    }

    init() {
        this.form.addEventListener("submit", (e) => {
            e.preventDefault();
            this.handleLogin();
        });
    }

    handleLogin() {
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        if (this.authService.login(username, password)) {
            this.message.style.color = "green";
            this.message.innerText = "Login berhasil, selamat datang! ðŸŽ‰";

            localStorage.setItem(
                "loginUser",
                JSON.stringify({ username })
            );

            setTimeout(() => {
                window.location.href = "dashboard.html";
            }, 1000);

        } else {
            this.message.style.color = "red";
            this.message.innerText =
                "Uhh maaf, kayaknya salah deh ðŸ˜… coba cek lagi";
        }
    }
}

new LoginController();

